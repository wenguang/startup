**两台虚拟器间的连通** 

cient.c、server.c在不同的centos虚拟机环境也

同一虚拟机可以连接成功，不同虚拟器连接异常：

server用环路ip bind，在启动firewall时(service firewalld restart)，cient的connect函数抛出：no route to host，在停止firewall时，client的connect函数抛出：connect refused

https://www.centos.org/forums/viewtopic.php?t=57032 这里提到

> It is only listening to port xxx on localhost, not your lan interface.



当client的sockfd设置为O_NONBLOCK后，errno显示EINPROGRESS：Operation now in progress异常

```
EINPROGRESS

    The socket is nonblocking and the connection cannot be completed
    immediately.  It is possible to select(2) or poll(2) for completion by
    selecting the socket for writing.  After select(2) indicates
    writability, use getsockopt(2) to read the SO_ERROR option at level
    SOL_SOCKET to determine whether connect() completed successfully
    (SO_ERROR is zero) or unsuccessfully (SO_ERROR is one of the usual
    error codes listed here, explaining the reason for the failure).
```

一般是连接上后才把sockfd设置为O_NONBLOCK



netstat -ant 查看网络状态

同一虚拟机连接上后的网络状态：

用ctl-c终止client